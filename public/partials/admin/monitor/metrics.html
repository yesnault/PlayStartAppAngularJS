<h2>Application Metrics</h2>
<p>
    <button type="button" class="btn btn-primary" ng-click="refresh()"><span class="fa fa-refresh"></span> Refresh</button>
    <button type="button" class="btn btn-warning" ng-click="gc()"><span class="fa fa-cogs"></span> Ask for a garbage</button>
</p>

<h3>JVM Metrics</h3>
<div class="row">
    <div class="col-md-4">
        <b>Memory</b>

        <p>Total Memory ({{metrics.gauges["jvm.memory.total.used"].value / 1000000 | number:0}}M /
            {{metrics.gauges["jvm.memory.total.max"].value / 1000000 | number:0}}M)</p>

        <div class="progress progress-striped">
            <div class="progress-bar progress-bar-success" role="progressbar"
                 aria-valuenow='{{metrics.gauges["jvm.memory.total.used"].value / 1000000 | number:0}}'
                 aria-valuemin="0"
                 aria-valuemax='{{metrics.gauges["jvm.memory.total.max"].value / 1000000 | number:0}}'
                 style='width: {{metrics.gauges["jvm.memory.total.used"].value * 100 / metrics.gauges["jvm.memory.total.max"].value  | number:0}}%'>
                {{metrics.gauges["jvm.memory.total.used"].value * 100 / metrics.gauges["jvm.memory.total.max"].value |
                number:0}}%
            </div>
        </div>
        <p>Heap Memory ({{metrics.gauges["jvm.memory.heap.used"].value / 1000000 | number:0}}M /
            {{metrics.gauges["jvm.memory.heap.max"].value / 1000000 | number:0}}M)</p>

        <div class="progress progress-striped">
            <div class="progress-bar progress-bar-success" role="progressbar"
                 aria-valuenow='{{metrics.gauges["jvm.memory.heap.used"].value / 1000000 | number:0}}'
                 aria-valuemin="0"
                 aria-valuemax='{{metrics.gauges["jvm.memory.heap.max"].value / 1000000 | number:0}}'
                 style='width: {{metrics.gauges["jvm.memory.heap.usage"].value * 100 | number:0}}%'>
                {{(metrics.gauges["jvm.memory.heap.usage"].value * 100 | number:0)}}%
            </div>
        </div>
        <p>Non-heap Memory ({{metrics.gauges["jvm.memory.non-heap.used"].value / 1000000 | number:0}}M /
            {{metrics.gauges["jvm.memory.non-heap.max"].value / 1000000 | number:0}}M)</p>

        <div class="progress progress-striped">
            <div class="progress-bar progress-bar-success" role="progressbar"
                 aria-valuenow='{{metrics.gauges["jvm.memory.non-heap.used"].value / 1000000 | number:0}}'
                 aria-valuemin="0"
                 aria-valuemax='{{metrics.gauges["jvm.memory.non-heap.max"].value / 1000000 | number:0}}'
                 style='width: {{metrics.gauges["jvm.memory.non-heap.usage"].value * 100 | number:0}}%'>
                {{(metrics.gauges["jvm.memory.non-heap.usage"].value * 100 | number:0)}}%
            </div>
        </div>
    </div>
    <div class="col-md-4">
        <b>Threads</b> (Total: {{metrics.gauges["jvm.threads.count"].value}})
        <p>Runnable {{metrics.gauges["jvm.threads.runnable.count"].value}}</p>

        <div class="progress progress-striped">
            <div class="progress-bar progress-bar-success" role="progressbar"
                 aria-valuenow='{{metrics.gauges["jvm.threads.runnable.count"].value}}'
                 aria-valuemin="0"
                 aria-valuemax='{{metrics.gauges["jvm.threads.count"].value}}'
                 style='width: {{metrics.gauges["jvm.threads.runnable.count"].value * 100 / metrics.gauges["jvm.threads.count"].value | number:0}}%'>
                {{metrics.gauges["jvm.threads.runnable.count"].value * 100 / metrics.gauges["jvm.threads.count"].value |
                number:0}}%
            </div>
        </div>
        <p>Timed waiting ({{metrics.gauges["jvm.threads.timed_waiting.count"].value}})</p>

        <div class="progress progress-striped">
            <div class="progress-bar progress-bar-warning" role="progressbar"
                 aria-valuenow='{{metrics.gauges["jvm.threads.timed_waiting.count"].value}}'
                 aria-valuemin="0"
                 aria-valuemax='{{metrics.gauges["jvm.threads.count"].value}}'
                 style='width: {{metrics.gauges["jvm.threads.timed_waiting.count"].value * 100 / metrics.gauges["jvm.threads.count"].value | number:0}}%'>
                {{metrics.gauges["jvm.threads.timed_waiting.count"].value * 100 /
                metrics.gauges["jvm.threads.count"].value | number:0}}%
            </div>
        </div>
        <p>Waiting ({{metrics.gauges["jvm.threads.waiting.count"].value}})</p>

        <div class="progress progress-striped">
            <div class="progress-bar progress-bar-warning" role="progressbar"
                 aria-valuenow='{{metrics.gauges["jvm.threads.waiting.count"].value}}'
                 aria-valuemin="0"
                 aria-valuemax='{{metrics.gauges["jvm.threads.count"].value}}'
                 style='width: {{metrics.gauges["jvm.threads.waiting.count"].value * 100 / metrics.gauges["jvm.threads.count"].value | number:0}}%'>
                {{metrics.gauges["jvm.threads.waiting.count"].value * 100 / metrics.gauges["jvm.threads.count"].value |
                number:0}}%
            </div>
        </div>
        <p>Blocked ({{metrics.gauges["jvm.threads.blocked.count"].value}})</p>

        <div class="progress progress-striped">
            <div class="progress-bar progress-bar-danger" role="progressbar"
                 aria-valuenow='{{metrics.gauges["jvm.threads.blocked.count"].value}}'
                 aria-valuemin="0"
                 aria-valuemax='{{metrics.gauges["jvm.threads.count"].value}}'
                 style='width: {{metrics.gauges["jvm.threads.blocked.count"].value * 100 / metrics.gauges["jvm.threads.count"].value | number:0}}%'>
                {{metrics.gauges["jvm.threads.blocked.count"].value * 100 / metrics.gauges["jvm.threads.count"].value |
                number:0}}%
            </div>
        </div>
    </div>
    <div class="col-md-4">
        <b>Garbage collections</b>

        <div class="row">
            <div class="col-md-9">Count</div>
            <div class="col-md-3">{{metrics.gauges["jvm.garbage.Copy.count"].value}}</div>
        </div>
        <div class="row">
            <div class="col-md-9">Time</div>
            <div class="col-md-3">{{metrics.gauges["jvm.garbage.Copy.time"].value}}ms</div>
        </div>
        <div class="row">
            <div class="col-md-9">MarkSweepCompact count</div>
            <div class="col-md-3">{{metrics.gauges["jvm.garbage.MarkSweepCompact.count"].value}}</div>
        </div>
        <div class="row">
            <div class="col-md-9">MarkSweepCompact time</div>
            <div class="col-md-3">{{metrics.gauges["jvm.garbage.MarkSweepCompact.time"].value}}ms</div>
        </div>
    </div>
</div>

<h3>HTTP requests (events per second)</h3>
<p>Active requests: <b>{{metrics.counters["models.monitoring.MetricsFilter.activeRequests"].count | number:0}}</b> -
    Total requests: <b>{{metrics.timers["models.monitoring.MetricsFilter.requestTimer"].count | number:0}}</b></p>
<div class="table-responsive">
    <table class="table table-striped">
        <thead>
        <tr>
            <th>Code</th>
            <th>Count</th>
            <th>Mean</th>
            <th>Average (1 min)</th>
            <th>Average (5 min)</th>
            <th>Average (15 min)</th>
        </tr>
        </thead>
        <tbody>
        <tr>
            <td>200</td>
            <td>{{metrics.meters["models.monitoring.MetricsFilter.200"].count}}</td>
            <td>{{metrics.meters["models.monitoring.MetricsFilter.200"].mean_rate | number:2}}</td>
            <td>{{metrics.meters["models.monitoring.MetricsFilter.200"].m1_rate | number:2}}</td>
            <td>{{metrics.meters["models.monitoring.MetricsFilter.200"].m5_rate | number:2}}</td>
            <td>{{metrics.meters["models.monitoring.MetricsFilter.200"].m15_rate | number:2}}</td>
        </tr>
        <tr>
            <td>201</td>
            <td>{{metrics.meters["models.monitoring.MetricsFilter.201"].count}}</td>
            <td>{{metrics.meters["models.monitoring.MetricsFilter.201"].mean_rate | number:2}}</td>
            <td>{{metrics.meters["models.monitoring.MetricsFilter.201"].m1_rate | number:2}}</td>
            <td>{{metrics.meters["models.monitoring.MetricsFilter.201"].m5_rate | number:2}}</td>
            <td>{{metrics.meters["models.monitoring.MetricsFilter.201"].m15_rate | number:2}}</td>
        </tr>
        <tr>
            <td>304</td>
            <td>{{metrics.meters["models.monitoring.MetricsFilter.304"].count}}</td>
            <td>{{metrics.meters["models.monitoring.MetricsFilter.304"].mean_rate | number:2}}</td>
            <td>{{metrics.meters["models.monitoring.MetricsFilter.304"].m1_rate | number:2}}</td>
            <td>{{metrics.meters["models.monitoring.MetricsFilter.304"].m5_rate | number:2}}</td>
            <td>{{metrics.meters["models.monitoring.MetricsFilter.304"].m15_rate | number:2}}</td>
        </tr>
        <tr>
            <td>307</td>
            <td>{{metrics.meters["models.monitoring.MetricsFilter.307"].count}}</td>
            <td>{{metrics.meters["models.monitoring.MetricsFilter.307"].mean_rate | number:2}}</td>
            <td>{{metrics.meters["models.monitoring.MetricsFilter.307"].m1_rate | number:2}}</td>
            <td>{{metrics.meters["models.monitoring.MetricsFilter.307"].m5_rate | number:2}}</td>
            <td>{{metrics.meters["models.monitoring.MetricsFilter.307"].m15_rate | number:2}}</td>
        </tr>
        <tr>
            <td>400</td>
            <td>{{metrics.meters["models.monitoring.MetricsFilter.400"].count}}</td>
            <td>{{metrics.meters["models.monitoring.MetricsFilter.400"].mean_rate | number:2}}</td>
            <td>{{metrics.meters["models.monitoring.MetricsFilter.400"].m1_rate | number:2}}</td>
            <td>{{metrics.meters["models.monitoring.MetricsFilter.400"].m5_rate | number:2}}</td>
            <td>{{metrics.meters["models.monitoring.MetricsFilter.400"].m15_rate | number:2}}</td>
        </tr>
        <tr>
            <td>403</td>
            <td>{{metrics.meters["models.monitoring.MetricsFilter.403"].count}}</td>
            <td>{{metrics.meters["models.monitoring.MetricsFilter.403"].mean_rate | number:2}}</td>
            <td>{{metrics.meters["models.monitoring.MetricsFilter.403"].m1_rate | number:2}}</td>
            <td>{{metrics.meters["models.monitoring.MetricsFilter.403"].m5_rate | number:2}}</td>
            <td>{{metrics.meters["models.monitoring.MetricsFilter.403"].m15_rate | number:2}}</td>
        </tr>
        <tr>
            <td>404</td>
            <td>{{metrics.meters["models.monitoring.MetricsFilter.404"].count}}</td>
            <td>{{metrics.meters["models.monitoring.MetricsFilter.404"].mean_rate | number:2}}</td>
            <td>{{metrics.meters["models.monitoring.MetricsFilter.404"].m1_rate | number:2}}</td>
            <td>{{metrics.meters["models.monitoring.MetricsFilter.404"].m5_rate | number:2}}</td>
            <td>{{metrics.meters["models.monitoring.MetricsFilter.404"].m15_rate | number:2}}</td>
        </tr>
        <tr>
            <td>500</td>
            <td>{{metrics.meters["models.monitoring.MetricsFilter.500"].count}}</td>
            <td>{{metrics.meters["models.monitoring.MetricsFilter.500"].mean_rate | number:2}}</td>
            <td>{{metrics.meters["models.monitoring.MetricsFilter.500"].m1_rate | number:2}}</td>
            <td>{{metrics.meters["models.monitoring.MetricsFilter.500"].m5_rate | number:2}}</td>
            <td>{{metrics.meters["models.monitoring.MetricsFilter.500"].m15_rate | number:2}}</td>
        </tr>
        <tr>
            <td>Other</td>
            <td>{{metrics.meters["models.monitoring.MetricsFilter.other"].count}}</td>
            <td>{{metrics.meters["models.monitoring.MetricsFilter.other"].mean_rate | number:2}}</td>
            <td>{{metrics.meters["models.monitoring.MetricsFilter.other"].m1_rate | number:2}}</td>
            <td>{{metrics.meters["models.monitoring.MetricsFilter.other"].m5_rate | number:2}}</td>
            <td>{{metrics.meters["models.monitoring.MetricsFilter.other"].m15_rate | number:2}}</td>
        </tr>

        </tbody>
    </table>

    <h3>Response time</h3>

    <div class="table-responsive">
        <table class="table table-striped">
            <thead>
            <tr>
                <th>Count</th>
                <th>Mean</th>
                <th>Min</th>
                <th>Max</th>
                <th>Average (1 min)</th>
                <th>Average (5 min)</th>
                <th>Average (15 min)</th>
            </tr>
            </thead>
            <tbody>
            <tr>
                <td>{{metrics.timers["models.monitoring.MetricsFilter.requestTimer"].count}}</td>
                <td>{{metrics.timers["models.monitoring.MetricsFilter.requestTimer"].mean | number:2}}</td>
                <td>{{metrics.timers["models.monitoring.MetricsFilter.requestTimer"].min | number:2}}</td>
                <td>{{metrics.timers["models.monitoring.MetricsFilter.requestTimer"].max | number:2}}</td>
                <td>{{metrics.timers["models.monitoring.MetricsFilter.requestTimer"].m1_rate | number:2}}</td>
                <td>{{metrics.timers["models.monitoring.MetricsFilter.requestTimer"].m5_rate | number:2}}</td>
                <td>{{metrics.timers["models.monitoring.MetricsFilter.requestTimer"].m15_rate | number:2}}</td>
            </tr>
            </tbody>
        </table>
    </div>


</div>